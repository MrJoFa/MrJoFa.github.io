<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Memory 5x5</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background: #f5f5f5;
    }

    #game {
        display: grid;
        grid-template-columns: repeat(5, 100px);
        grid-gap: 10px;
        justify-content: center;
        margin-top: 20px;
    }

    .card {
        width: 100px;
        height: 100px;
        background: #4a90e2;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 0;
    }

    .card img {
        width: 100%;
        height: 100%;
        display: none;
        border-radius: 8px;
    }

    .flipped img, .matched img {
        display: block;
    }

    #timer {
        font-size: 24px;
        margin-top: 10px;
        font-weight: bold;
    }

    #status {
        font-size: 22px;
        margin-top: 15px;
        font-weight: bold;
        color: darkgreen;
    }
</style>
</head>
<body>

<h1>Memory 5x5</h1>
<div id="timer">Tid kvar: 30</div>
<div id="status"></div>
<div id="game"></div>

<script>
// ----- SKAPA BILDER -----
const images = [];
for (let i = 1; i <= 12; i++) {
    images.push(`https://picsum.photos/seed/${i}/100`);
    images.push(`https://picsum.photos/seed/${i}b/100`);
}
images.push("https://picsum.photos/seed/joker/100"); // 25:e kortet

// Blanda kort
images.sort(() => 0.5 - Math.random());

const game = document.getElementById("game");
let firstCard = null;
let secondCard = null;
let lockBoard = false;
let matches = 0;

// ----- SKAPA KORT -----
images.forEach(src => {
    const card = document.createElement("div");
    card.classList.add("card");

    const img = document.createElement("img");
    img.src = src;

    card.appendChild(img);
    game.appendChild(card);

    card.addEventListener("click", () => flipCard(card));
});

function flipCard(card) {
    if (lockBoard || card.classList.contains("flipped") || card.classList.contains("matched")) return;

    card.classList.add("flipped");

    if (!firstCard) {
        firstCard = card;
        return;
    }

    secondCard = card;
    checkMatch();
}

function checkMatch() {
    lockBoard = true;

    const img1 = firstCard.querySelector("img").src;
    const img2 = secondCard.querySelector("img").src;

    if (img1 === img2) {
        firstCard.classList.add("matched");
        secondCard.classList.add("matched");
        matches++;

        resetTurn();

        if (matches === 12) {
            // âœ” Klarat spelet i tid?
            if (timeLeft > 0) {
                document.getElementById("status").textContent =
                    "ðŸŽ„ Grattis! Du klarade spelet! Koden Ã¤r: **julgran**";
            }
            clearInterval(timerCountdown);
        }
    } else {
        setTimeout(() => {
            firstCard.classList.remove("flipped");
            secondCard.classList.remove("flipped");
            resetTurn();
        }, 800);
    }
}

function resetTurn() {
    [firstCard, secondCard, lockBoard] = [null, null, false];
}

// ----- TIMER (60 sek) -----
let timeLeft = 60;
const timerDiv = document.getElementById("timer");

const timerCountdown = setInterval(() => {
    timeLeft--;
    timerDiv.textContent = "Tid kvar: " + timeLeft;

    if (timeLeft <= 0) {
        clearInterval(timerCountdown);
        lockBoard = true;
        document.getElementById("status").textContent = "â° Tiden Ã¤r slut!";
    }
}, 1000);
</script>

</body>
</html>
