<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Snake â€“ TvÃ¥ Spelare</title>
<style>
    body {
        background:#222;
        color:white;
        text-align:center;
        font-family:Arial, sans-serif;
    }
    #gameCanvas {
        background:#111;
        margin-top:20px;
        border:4px solid #900;
    }
    #message {
        margin-top:20px;
        font-size:24px;
        font-weight:bold;
    }
</style>
</head>
<body>

<h1>ğŸğŸ Snake â€“ TvÃ¥ Spelare</h1>
<p>Spelare 1: WASD â€¢ Spelare 2: Piltangenter</p>
<canvas id="gameCanvas" width="600" height="400"></canvas>
<div id="message"></div>

<script>
// =============================
//  SPELVARIABLER
// =============================
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const gridSize = 20;
let gameLoop;
let gameTime = 60;
let timerStarted = false;

// Ormar
let snake1, snake2, food;

function resetGame() {
    snake1 = {
        body: [{x:3, y:3}, {x:2, y:3}, {x:1, y:3}],
        dx: 1,
        dy: 0,
        color: "lime"
    };
    snake2 = {
        body: [{x:25, y:10}, {x:26, y:10}, {x:27, y:10}],
        dx: -1,
        dy: 0,
        color: "cyan"
    };
    spawnFood();

    gameTime = 60;
    timerStarted = false;
    document.getElementById("message").textContent = "";

    clearInterval(gameLoop);
    gameLoop = setInterval(updateGame, 100);
}

function spawnFood() {
    food = {
        x: Math.floor(Math.random() * (canvas.width / gridSize)),
        y: Math.floor(Math.random() * (canvas.height / gridSize))
    };
}

// =============================
//  STYRNING
// =============================
document.addEventListener("keydown", (e) => {
    // Spelare 1 (WASD)
    if (e.key === "w" && snake1.dy === 0) { snake1.dx = 0; snake1.dy = -1; startTimer(); }
    if (e.key === "s" && snake1.dy === 0) { snake1.dx = 0; snake1.dy = 1; startTimer(); }
    if (e.key === "a" && snake1.dx === 0) { snake1.dx = -1; snake1.dy = 0; startTimer(); }
    if (e.key === "d" && snake1.dx === 0) { snake1.dx = 1; snake1.dy = 0; startTimer(); }

    // Spelare 2 (piltangenter)
    if (e.key === "ArrowUp" && snake2.dy === 0) { snake2.dx = 0; snake2.dy = -1; startTimer(); }
    if (e.key === "ArrowDown" && snake2.dy === 0) { snake2.dx = 0; snake2.dy = 1; startTimer(); }
    if (e.key === "ArrowLeft" && snake2.dx === 0) { snake2.dx = -1; snake2.dy = 0; startTimer(); }
    if (e.key === "ArrowRight" && snake2.dx === 0) { snake2.dx = 1; snake2.dy = 0; startTimer(); }
});

// =============================
//  TIMER FÃ–R 60s
// =============================
function startTimer() {
    if (timerStarted) return;
    timerStarted = true;

    const t = setInterval(() => {
        gameTime--;
        if (gameTime <= 0) {
            clearInterval(t);
            clearInterval(gameLoop);
            document.getElementById("message").textContent =
                "ğŸ… Grattis! Ni klarade spelet!";
        }
    }, 1000);
}

// =============================
//  SPELUPPDATERING
// =============================
function updateGame() {

    moveSnake(snake1);
    moveSnake(snake2);

    if (hitWall(snake1)
